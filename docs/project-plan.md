# 초등학교 반편성 AI 시스템 프로젝트 계획서

## 📋 프로젝트 개요

**프로젝트명**: AI 기반 초등학교 반편성 시스템  
**목적**: 학생 데이터를 분석하여 균형잡힌 학급 편성을 자동화하는 로컬 AI 기반 윈도우 애플리케이션  
**핵심 가치**: 개인정보 보호, 오프라인 동작, 사용자 친화성, 데이터 안전성

## 🎯 핵심 요구사항

### 1. 개인정보 보호
- ✅ 모든 데이터 로컬 저장 (외부 서버 전송 없음)
- ✅ AES-256 암호화 옵션
- ✅ 데이터베이스 암호화
- ✅ 사용자 인증 및 접근 제어
- ✅ 민감 정보 마스킹 기능

### 2. 오프라인 동작
- ✅ 인터넷 연결 불필요
- ✅ 로컬 AI 모델 (Ollama 기반)
- ✅ 로컬 데이터베이스 (SQLite)
- ✅ 모든 처리 로컬 실행

### 3. 사용자 친화성
- ✅ 직관적인 UI/UX
- ✅ 드래그 앤 드롭 파일 업로드
- ✅ 실시간 미리보기
- ✅ 단계별 가이드
- ✅ 한글 완벽 지원

### 4. 백업 기능
- ✅ 자동 백업 (설정 가능한 주기)
- ✅ 수동 백업/복구
- ✅ 버전 관리
- ✅ 백업 파일 암호화
- ✅ 클라우드 동기화 옵션 (선택사항)

## 🛠 기술 스택

### 프론트엔드
- **Framework**: Tauri + React + TypeScript
- **UI Library**: Material-UI (MUI)
- **상태 관리**: Zustand
- **차트**: Recharts
- **테이블**: AG Grid Community

### 백엔드
- **API Server**: Python FastAPI
- **데이터베이스**: SQLite + SQLCipher (암호화)
- **ORM**: SQLAlchemy

### AI/ML
- **로컬 LLM**: Ollama (llama3, mistral)
- **데이터 분석**: pandas, numpy
- **머신러닝**: scikit-learn
- **최적화**: optuna, scipy

### 보안
- **암호화**: cryptography (Python), AES-256
- **해싱**: bcrypt
- **키 관리**: Tauri Secure Storage

### 백업
- **압축**: zip, tar.gz
- **스케줄링**: APScheduler (Python)
- **파일 감시**: watchdog

## 📐 시스템 아키텍처

```
┌─────────────────────────────────────────────┐
│         Tauri Desktop App (UI)              │
│  ┌─────────────────────────────────────┐   │
│  │  React + TypeScript Frontend        │   │
│  │  - 학생 데이터 관리                  │   │
│  │  - 반편성 시뮬레이션                 │   │
│  │  - 결과 시각화                       │   │
│  └──────────────┬──────────────────────┘   │
│                 │ IPC                       │
│  ┌──────────────▼──────────────────────┐   │
│  │  Rust Backend (Tauri Core)          │   │
│  │  - 파일 시스템 접근                  │   │
│  │  - 암호화/복호화                     │   │
│  │  - 백업 관리                         │   │
│  └──────────────┬──────────────────────┘   │
└─────────────────┼──────────────────────────┘
                  │ HTTP (localhost)
┌─────────────────▼──────────────────────────┐
│     Python FastAPI Server (로컬)           │
│  ┌─────────────────────────────────────┐   │
│  │  API Endpoints                      │   │
│  │  - 데이터 CRUD                       │   │
│  │  - 반편성 알고리즘 실행              │   │
│  │  - AI 분석 요청                      │   │
│  └──────────────┬──────────────────────┘   │
│                 │                           │
│  ┌──────────────▼──────────────────────┐   │
│  │  Business Logic                     │   │
│  │  - 제약조건 처리                     │   │
│  │  - 최적화 알고리즘                   │   │
│  │  - 통계 분석                         │   │
│  └──────────────┬──────────────────────┘   │
└─────────────────┼──────────────────────────┘
                  │
      ┌───────────┴───────────┐
      │                       │
┌─────▼──────┐         ┌─────▼─────┐
│  SQLite    │         │  Ollama   │
│  +          │         │ (로컬 LLM)│
│ SQLCipher  │         │           │
│ (암호화 DB)│         └───────────┘
└────────────┘
```

## 🗂 프로젝트 구조

```
aichangeclass/
├── docs/                          # 문서
│   ├── project-plan.md           # 프로젝트 계획서 (본 문서)
│   ├── security-guide.md         # 보안 가이드
│   ├── backup-guide.md           # 백업 가이드
│   └── user-manual.md            # 사용자 매뉴얼
├── frontend/                      # Tauri + React
│   ├── src/
│   │   ├── components/           # UI 컴포넌트
│   │   │   ├── StudentTable/    # 학생 데이터 테이블
│   │   │   ├── ClassAssignment/ # 반편성 결과
│   │   │   ├── Dashboard/       # 대시보드
│   │   │   └── Settings/        # 설정
│   │   ├── pages/               # 페이지
│   │   ├── services/            # API 호출
│   │   ├── stores/              # 상태 관리
│   │   └── utils/               # 유틸리티
│   └── src-tauri/               # Rust 백엔드
│       ├── src/
│       │   ├── encryption.rs    # 암호화
│       │   ├── backup.rs        # 백업
│       │   └── main.rs
│       └── Cargo.toml
├── backend/                      # Python FastAPI
│   ├── api/                     # API 엔드포인트
│   │   ├── students.py
│   │   ├── classes.py
│   │   └── analysis.py
│   ├── models/                  # 데이터 모델
│   ├── algorithms/              # 반편성 알고리즘
│   │   ├── constraint_solver.py
│   │   ├── optimizer.py
│   │   └── evaluator.py
│   ├── ai/                      # AI 모델 연동
│   │   ├── ollama_client.py
│   │   └── analyzer.py
│   ├── security/                # 보안
│   │   ├── encryption.py
│   │   └── auth.py
│   └── backup/                  # 백업
│       ├── scheduler.py
│       └── manager.py
├── data/                        # 로컬 데이터
│   ├── database.db             # SQLite DB
│   ├── backups/                # 백업 파일
│   └── logs/                   # 로그
└── README.md
```

## 🔐 보안 및 개인정보 보호 상세 설계

### 데이터 암호화

#### 1. 데이터베이스 암호화
```python
# SQLCipher를 사용한 전체 DB 암호화
- 암호화 알고리즘: AES-256
- 키 파생: PBKDF2 (100,000 iterations)
- 사용자가 설정한 마스터 비밀번호로 보호
```

#### 2. 파일 암호화
```python
# 백업 파일 및 엑스포트 파일 암호화
- cryptography.fernet 사용
- 각 파일마다 고유 키 생성
- 키는 안전한 저장소에 보관 (Tauri Secure Storage)
```

#### 3. 메모리 보안
- 민감 데이터 사용 후 즉시 메모리에서 제거
- 비밀번호는 해시로만 저장 (bcrypt)
- 로그에 개인정보 기록 금지

### 접근 제어

```
┌─────────────────────────────────┐
│  애플리케이션 시작               │
└────────────┬────────────────────┘
             │
             ▼
┌─────────────────────────────────┐
│  사용자 인증                     │
│  - 비밀번호 입력                 │
│  - 생체 인증 (옵션)              │
└────────────┬────────────────────┘
             │
             ▼
┌─────────────────────────────────┐
│  세션 생성                       │
│  - 타임아웃: 30분                │
│  - 자동 잠금                     │
└────────────┬────────────────────┘
             │
             ▼
┌─────────────────────────────────┐
│  데이터 접근 허용                │
└─────────────────────────────────┘
```

### 데이터 최소화
- 필수 정보만 수집
- 민감 정보는 선택적 입력
- 불필요한 데이터 자동 삭제 옵션

## 📡 오프라인 동작 상세 설계

### 로컬 AI 설정

#### Ollama 모델 선택
```bash
# 추천 모델 (용량 vs 성능)
1. llama3:8b (4.7GB) - 균형잡힌 선택 ⭐ 추천
2. mistral:7b (4.1GB) - 빠른 응답
3. phi3:mini (2.3GB) - 저사양 PC용
```

#### AI 활용 시나리오
1. **학생 특성 분석**
   - 교사 메모 텍스트 분석
   - 성격 유형 추론
   - 학습 스타일 파악

2. **편성 결과 설명**
   - 왜 이렇게 편성되었는지 자연어로 설명
   - 개선 제안 생성

3. **질의응답**
   - "성적이 고르게 분포되었나요?"
   - "문제 학생들이 분리되었나요?"

### 오프라인 데이터 처리
```python
# 모든 처리가 로컬에서 실행
1. 데이터 입력 → 로컬 DB 저장
2. AI 분석 → Ollama (localhost:11434)
3. 알고리즘 실행 → Python 로컬 서버
4. 결과 저장 → 로컬 DB
5. 백업 → 로컬 파일 시스템
```

## 🎨 사용자 친화적 UI 설계

### 주요 화면 구성

#### 1. 대시보드
```
┌─────────────────────────────────────────┐
│  📊 반편성 대시보드                      │
├─────────────────────────────────────────┤
│  ┌─────────┐  ┌─────────┐  ┌─────────┐ │
│  │ 총 학생 │  │ 반 수   │  │ 완료율  │ │
│  │  120명  │  │  4개    │  │  75%    │ │
│  └─────────┘  └─────────┘  └─────────┘ │
│                                         │
│  📈 반별 통계 차트                       │
│  [성별 분포] [성적 분포] [특성 분포]    │
└─────────────────────────────────────────┘
```

#### 2. 학생 데이터 관리
```
┌─────────────────────────────────────────┐
│  👥 학생 데이터 관리                     │
├─────────────────────────────────────────┤
│  [📁 파일 업로드] [➕ 학생 추가]        │
│                                         │
│  🔍 검색: [________]  필터: [전체 ▼]   │
│                                         │
│  ┌───┬────┬────┬────┬────┬────────┐   │
│  │No │이름│성별│성적│특성│  작업  │   │
│  ├───┼────┼────┼────┼────┼────────┤   │
│  │ 1 │홍길동│남 │ 85 │리더│[수정][삭제]│   │
│  │ 2 │김영희│여 │ 92 │조용│[수정][삭제]│   │
│  └───┴────┴────┴────┴────┴────────┘   │
└─────────────────────────────────────────┘
```

#### 3. 반편성 실행
```
┌─────────────────────────────────────────┐
│  🎯 반편성 실행                          │
├─────────────────────────────────────────┤
│  단계 1: 기본 설정                       │
│  ┌─────────────────────────────────┐   │
│  │ 반 개수: [4] 개                  │   │
│  │ 반당 인원: [30] 명               │   │
│  └─────────────────────────────────┘   │
│                                         │
│  단계 2: 편성 기준 (가중치 조정)         │
│  ┌─────────────────────────────────┐   │
│  │ 성별 균형:    ████████░░ 80%    │   │
│  │ 성적 균형:    ██████████ 100%   │   │
│  │ 친구 관계:    ████░░░░░░ 40%    │   │
│  └─────────────────────────────────┘   │
│                                         │
│  단계 3: 제약 조건                       │
│  ┌─────────────────────────────────┐   │
│  │ ☑ 분리 희망 학생 처리            │   │
│  │ ☑ 특수 학생 분산                 │   │
│  │ ☐ 성적 상위권 분산               │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [🚀 반편성 시작]                       │
└─────────────────────────────────────────┘
```

#### 4. 결과 확인 및 조정
```
┌─────────────────────────────────────────┐
│  ✅ 반편성 결과                          │
├─────────────────────────────────────────┤
│  [1반] [2반] [3반] [4반]                │
│                                         │
│  📊 1반 (30명)                          │
│  ┌─────────────────────────────────┐   │
│  │ 남: 15명 | 여: 15명              │   │
│  │ 평균 성적: 82.5점                │   │
│  │ 균형도 점수: ⭐⭐⭐⭐⭐ 95/100   │   │
│  └─────────────────────────────────┘   │
│                                         │
│  학생 목록:                              │
│  [홍길동] [김영희] [이철수] ...         │
│                                         │
│  💡 AI 분석:                            │
│  "이 반은 성별과 성적이 균형있게        │
│   분포되어 있습니다. 리더십 있는        │
│   학생과 조용한 학생이 적절히 섞여      │
│   있어 좋은 학급 분위기가 예상됩니다."  │
│                                         │
│  [🔄 재편성] [💾 저장] [📄 리포트]      │
└─────────────────────────────────────────┘
```

### UX 개선 요소

1. **드래그 앤 드롭**
   - Excel/CSV 파일을 화면에 드롭하여 즉시 업로드
   - 학생을 드래그하여 반 간 이동

2. **실시간 미리보기**
   - 설정 변경 시 즉시 결과 반영
   - 차트 실시간 업데이트

3. **단계별 가이드**
   - 첫 사용자를 위한 튜토리얼
   - 각 단계마다 도움말 툴팁

4. **키보드 단축키**
   - Ctrl+S: 저장
   - Ctrl+N: 새 프로젝트
   - Ctrl+B: 백업

5. **다크 모드**
   - 눈의 피로 감소
   - 사용자 선호도 저장

## 💾 자동 백업 시스템 상세 설계

### 백업 전략

#### 1. 자동 백업
```python
# 백업 주기 옵션
- 실시간 (변경 시마다)
- 매 시간
- 매일 (기본값) ⭐
- 매주
- 수동만
```

#### 2. 백업 보관 정책
```python
# 세대 관리 (Grandfather-Father-Son)
- 일일 백업: 최근 7일 보관
- 주간 백업: 최근 4주 보관
- 월간 백업: 최근 12개월 보관
- 연간 백업: 영구 보관
```

#### 3. 백업 파일 구조
```
data/backups/
├── auto/                          # 자동 백업
│   ├── daily/
│   │   ├── backup_2024-01-15_09-00.enc
│   │   ├── backup_2024-01-16_09-00.enc
│   │   └── ...
│   ├── weekly/
│   │   └── backup_2024-W03.enc
│   └── monthly/
│       └── backup_2024-01.enc
└── manual/                        # 수동 백업
    ├── before_assignment_2024-01-15.enc
    └── final_result_2024-01-20.enc
```

### 백업 프로세스

```
┌─────────────────────────────────┐
│  데이터 변경 감지                │
└────────────┬────────────────────┘
             │
             ▼
┌─────────────────────────────────┐
│  백업 스케줄 확인                │
│  (마지막 백업 시간 체크)         │
└────────────┬────────────────────┘
             │
             ▼
┌─────────────────────────────────┐
│  데이터베이스 스냅샷 생성        │
└────────────┬────────────────────┘
             │
             ▼
┌─────────────────────────────────┐
│  압축 (gzip)                     │
└────────────┬────────────────────┘
             │
             ▼
┌─────────────────────────────────┐
│  암호화 (AES-256)                │
└────────────┬────────────────────┘
             │
             ▼
┌─────────────────────────────────┐
│  백업 파일 저장                  │
│  + 메타데이터 기록               │
└────────────┬────────────────────┘
             │
             ▼
┌─────────────────────────────────┐
│  오래된 백업 정리                │
│  (보관 정책에 따라)              │
└─────────────────────────────────┘
```

### 복구 프로세스

```
┌─────────────────────────────────┐
│  백업 파일 선택                  │
│  (날짜, 크기, 설명 표시)         │
└────────────┬────────────────────┘
             │
             ▼
┌─────────────────────────────────┐
│  복구 전 현재 데이터 백업        │
│  (안전장치)                      │
└────────────┬────────────────────┘
             │
             ▼
┌─────────────────────────────────┐
│  백업 파일 복호화                │
└────────────┬────────────────────┘
             │
             ▼
┌─────────────────────────────────┐
│  압축 해제                       │
└────────────┬────────────────────┘
             │
             ▼
┌─────────────────────────────────┐
│  데이터베이스 복원               │
└────────────┬────────────────────┘
             │
             ▼
┌─────────────────────────────────┐
│  무결성 검증                     │
└────────────┬────────────────────┘
             │
             ▼
┌─────────────────────────────────┐
│  복구 완료 알림                  │
└─────────────────────────────────┘
```

### 백업 UI

```
┌─────────────────────────────────────────┐
│  💾 백업 및 복구                         │
├─────────────────────────────────────────┤
│  자동 백업 설정                          │
│  ┌─────────────────────────────────┐   │
│  │ ☑ 자동 백업 활성화               │   │
│  │ 주기: [매일 ▼] 시간: [09:00]    │   │
│  │ ☑ 백업 파일 암호화               │   │
│  │ 보관 기간: [30일 ▼]             │   │
│  └─────────────────────────────────┘   │
│                                         │
│  백업 목록                               │
│  ┌───┬──────────┬──────┬────────┐     │
│  │종류│  날짜    │ 크기 │  작업  │     │
│  ├───┼──────────┼──────┼────────┤     │
│  │자동│2024-01-20│ 2.3MB│[복구][삭제]│     │
│  │자동│2024-01-19│ 2.2MB│[복구][삭제]│     │
│  │수동│2024-01-15│ 2.1MB│[복구][삭제]│     │
│  └───┴──────────┴──────┴────────┘     │
│                                         │
│  [📦 지금 백업하기] [🗑 전체 정리]      │
└─────────────────────────────────────────┘
```

## 🚀 개발 로드맵

### Phase 1: 기반 구축 (2주)
- [x] 프로젝트 구조 설정
- [ ] Tauri + React 환경 구축
- [ ] Python FastAPI 서버 구축
- [ ] SQLite 데이터베이스 설계
- [ ] 기본 UI 프레임워크

### Phase 2: 핵심 기능 (3주)
- [ ] 학생 데이터 CRUD
- [ ] Excel/CSV 임포트
- [ ] 기본 반편성 알고리즘
- [ ] 제약조건 처리
- [ ] 결과 시각화

### Phase 3: AI 통합 (2주)
- [ ] Ollama 설치 및 설정
- [ ] AI 분석 기능
- [ ] 자연어 설명 생성
- [ ] 최적화 알고리즘 개선

### Phase 4: 보안 및 백업 (2주)
- [ ] 데이터베이스 암호화
- [ ] 파일 암호화
- [ ] 사용자 인증
- [ ] 자동 백업 시스템
- [ ] 복구 기능

### Phase 5: UX 개선 (1주)
- [ ] 드래그 앤 드롭
- [ ] 실시간 미리보기
- [ ] 튜토리얼
- [ ] 다크 모드
- [ ] 키보드 단축키

### Phase 6: 테스트 및 최적화 (2주)
- [ ] 단위 테스트
- [ ] 통합 테스트
- [ ] 성능 최적화
- [ ] 사용자 테스트
- [ ] 버그 수정

### Phase 7: 배포 준비 (1주)
- [ ] 설치 프로그램 제작
- [ ] 사용자 매뉴얼 작성
- [ ] 라이선스 정리
- [ ] 최종 테스트

**총 예상 기간**: 13주 (약 3개월)

## 📊 성공 지표

### 기술적 지표
- ✅ 100% 오프라인 동작
- ✅ 데이터 암호화율 100%
- ✅ 백업 성공률 99.9%
- ✅ 반편성 처리 시간 < 10초 (120명 기준)
- ✅ 메모리 사용량 < 500MB

### 사용자 만족도
- ✅ UI 직관성 점수 > 4.5/5
- ✅ 학습 시간 < 30분
- ✅ 오류 발생률 < 1%
- ✅ 사용자 추천 의향 > 80%

## 📝 다음 단계

1. **환경 설정**
   - Node.js, Rust, Python 설치
   - Tauri CLI 설치
   - Ollama 설치

2. **프로젝트 초기화**
   - Tauri 프로젝트 생성
   - React + TypeScript 설정
   - Python 가상환경 생성

3. **데이터베이스 설계**
   - ERD 작성
   - 테이블 스키마 정의
   - 마이그레이션 스크립트

4. **프로토타입 개발**
   - 기본 UI 구현
   - 간단한 CRUD 기능
   - 데모 데이터로 테스트

---

**문서 버전**: 1.0
**최종 수정일**: 2024-01-20
**작성자**: AI Assistant

